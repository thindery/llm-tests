# Memory: 2026-02-25

## TASK-048: Activity Dashboard Time Filter Bug - COMPLETED
- **Issue:** 24-hour tab showing only 1 activity when multiple should appear; 17-18h old activities missing
- **Root Cause:** SQLite datetime('now', '-24 hours') uses local time, but timestamps stored in UTC
- **Fix:** Changed to datetime('now', '-24 hours', 'utc') in /src/app/api/activity/route.ts
- **Applied to:** All time ranges (1h, 12h, 24h, 3d, 7d, default)
- **Ralph Workflow:** Properly completed all phases (Planner→Setup→Dev→Verify→Test→Review→Closed)

## TASK-049: Kanban Scrollbar Position - COMPLETED
- **Issue:** Horizontal scrollbar at bottom of Kanban columns, requiring scroll down to access
- **Fix:** CSS rotate-180 trick on container + counter-rotate on content
- **File:** src/components/board/KanbanBoard.tsx
- **Ralph Workflow:** Properly completed

## Critical Issue: SQLite WAL Corruption
- **Error:** SQLITE_IOERR_SHORT_READ on all API endpoints
- **Symptom:** remy.db-wal becomes 0 bytes, dev server returns 500 errors
- **Frequency:** Recurring - happened at least 3+ times today
- **Environment:** macOS + Next.js dev server (hot reload) + better-sqlite3
- **Current Workaround:** 
  1. pkill -f "next dev -p 3474"
  2. rm -f remy.db-wal remy.db-shm
  3. npm run dev
- **Research:** TASK-050 created for deep dive into WAL crash prevention options
- **Config:** Currently using journal_mode=WAL, wal_autocheckpoint=1000

## Ralph Workflow Lessons
- When Dev agent times out and PM does manual fix: Must manually mark Dev/Verify/Test phases complete
- Use: cd ~/projects/remy-tracker && bash ~/.openclaw/workspace/skills/ralph/ralph-phase.sh TICKET --mark=phase
- Prevents "Cannot move to Closed/Done: Verify phase incomplete" errors

## Tickets Created Today
- TASK-048: Activity Dashboard Time Filter Bug (Bug Fix, High, Closed)
- TASK-049: Move Kanban horizontal scrollbar to top (Dev Task, Medium, Closed)
- TASK-050: SQLite WAL Crash Prevention Deep Dive (Research, High, In Research)
- TASK-051: Fix Kanban ticket modal positioning (Bug Fix, Medium, Closed)
- TASK-052: Fix artifact page params.then error (Bug Fix, High, Closed)
- TASK-053: Artifact file content loading with marked.js (Dev Task, High, Dev)
- TASK-054: Fix ticket artifacts tab API error (Bug Fix, High, Closed)

## TASK-051: Kanban Modal Viewport Centering - COMPLETED
- **Issue:** Ticket detail modal centered in tall container, appeared off-screen
- **Root Cause:** KanbanBoard's rotate-180 creates containing block, breaking position:fixed
- **Fix:** Use React Portal to render modal at document.body level, escaping transform context
- **File:** src/components/ticket/TicketDetailModal.tsx
- **Commit:** af882b6

## TASK-052: Artifact Page params.then Error - COMPLETED
- **Issue:** TypeError: params.then is not a function on /artifacts/[id]
- **Root Cause:** Next.js 14 changed params from Promise to sync object
- **Fix:** Changed from params.then(p => setId(p.id)) to const { id } = params
- **File:** src/app/artifacts/[id]/page.tsx
- **Commit:** a68f366

## TASK-053 + TASK-054: Artifact System Fixes - COMPLETED
- **TASK-054:** Created /api/tickets/[id]/artifacts endpoint for linked artifacts
  - Fixed table name: artifact_ticket_links (not ticket_artifact_links)
- **TASK-053:** Created file content loading with marked.js
  - /api/artifacts/[id]/content - reads file from disk
  - /api/artifacts/[id]/render - renders markdown to HTML
  - Security: Path sanitization, only ~/projects/ and ~/.openclaw/ allowed
- **Bug Fix:** artifacts.map error - hook expected array but API returned object
  - Fixed useTicketArtifacts.ts to extract data.artifacts
- **Dependencies Added:** marked, react-markdown, remark-gfm
- **Commit:** 91d74d6, 8da80b9, 277809b
